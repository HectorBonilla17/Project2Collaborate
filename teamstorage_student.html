<!doctype html>
<!--=====================================================================
For the grades page we need a dynamic JS table for both the professor and 
student. We can also include a text box for the professor to comment.

GradeID
PointsEarned 
TotalPoints 
GradePercentage X
LetterGrade X
FacultyFeedback X
DatePosted X
AssignmentID
StudentID
=====================================================================-->
<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Project2Collaborate</title>
  <meta name="Group 3" content="">
  <!--<link rel="stylesheet" href="bootstrap?">-->
  <link rel="stylesheet" href="stylesheets/styles.css">
  <link rel="stylesheet" href="stylesheets/bootstrap.css"
  <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <!-- google cdn <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>-->

  <script>
    let teamStorageData = [
      { fileName: 'HW1 - Planning document.docx', dateUploaded: '2021-01-05' },
      { fileName: 'Web Page Design - Homework 1', dateUploaded: '2021-01-04' },
      { fileName: 'HW1', dateUploaded: '2021-01-04' },
      { fileName: 'HW2', dateUploaded: '2021-01-11' },
      { fileName: 'HW3', dateUploaded: '2021-02-01' },
      { fileName: 'HW4', dateUploaded: '2021-02-08' },
      { fileName: 'HW5', dateUploaded: '2021-02-15' },
      { fileName: 'HW6 project', dateUploaded: '2021-03-01' },
      { fileName: 'HW7 documentation', dateUploaded: '2021-03-01' },
      { fileName: 'HW8 personal assessment', dateUploaded: '2021-03-01' },
      { fileName: 'HW9 personal log', dateUploaded: '2021-01-04' },
      { fileName: 'PRESENTATION INSTRUCTIONS', dateUploaded: '2021-01-05' },
      { fileName: 'PROJECT requirements', dateUploaded: '2021-01-07' },
      { fileName: 'W2021 PROJECT', dateUploaded: '2021-01-07' },
      { fileName: 'Hireme.Co Functional Requirements Document', dateUploaded: '2021-01-20' },
      { fileName: 'RequirementsAnalysisDocument', dateUploaded: '2021-01-20' },
      { fileName: 'Homework 2 team document', dateUploaded: '2021-01-15' },
      { fileName: 'Homework 5 Plan', dateUploaded: '2021-02-27' },
      { fileName: 'Homework 7 documentation', dateUploaded: '2021-03-10' },
      { fileName: 'HW3 team document', dateUploaded: '2021-01-30' },
    ];
    
    window.onload = () => {
      loadTableData(teamStorageData);
    };
    
    function loadTableData(teamStorageData) {
      const tableBody = document.getElementById('teamStorageBody');
      let dataHtml = '';
      
      for(let teamFile of teamStorageData) {
        dataHtml += `<tr><td>${teamFile.fileName}</td><td>${teamFile.dateUploaded}</td></tr>`;
      }
      
      tableBody.innerHTML = dataHtml;
    }
  </script>
</head>

<header>
    <h1> Team Storage </h1>
</header>

<!-- <form method="post" enctype="multipart/form-data">
  <input type="file" name="files[]" multiple />
  <input type="submit" value="Upload File" name="submit" />
</form> -->

<form id="myForm" method="post" enctype="multipart/form-data">
  Files: <input type="file" id="files" name="files" multiple><br/>
  <div id="selectedFiles"></div>
  <input type="button" id="teamstorage_submit" value="Submit File" onclick="submitFile();">
  <input type="button" id="teamstorage_delete" value="Delete File" onclick="deleteFile();">
</form>

<script>
  <!-- function to create a new row in the table -->
  function submitFile() {
    var fileName = prompt("Please enter the name of the file you want to share with your team.");
    var dateUploaded = prompt("Please enter today's date in the format 'yyyy-mm-dd'.");
    if (fileName == null || fileName == "" || dateUploaded == null || dateUploaded == "") {
      alert("Please fill in all of the boxes.");
    }
    else {
      var row = document.getElementById("teamStorageTable").insertRow(-1);
      (row.insertCell(0)).innerHTML = fileName;
      (row.insertCell(1)).innerHTML = dateUploaded;
    }
  }

  <!-- function to delete a row from the table -->
  function deleteFile() {
    var fileName = prompt("Please enter the name of the file you want to delete.");
    var dateUploaded = prompt("Please enter the date on which this file was uploaded, in the format 'yyyy-mm-dd'.");

    if (fileName == null || fileName == "" || dateUploaded == null || dateUploaded == "") {
      alert("Please fill in all of the boxes.");
    }
    else {
      var index = new Number();

      for (i = 0; i <= document.getElementById("teamStorageTable").rows.length; i++) {
        if (document.getElementById("teamStorageTable").rows[i].cells[0].innerHTML == fileName && document.getElementById("teamStorageTable").rows[i].cells[1].innerHTML == dateUploaded) {
          index = i;
          break;
        }
      }
      document.getElementById("teamStorageTable").deleteRow(index);
    }
  }
</script>

<table style="width:75%" id="teamStorageTable">
  <thead>
    <tr>
      <th>File Name</th>
      <th>Date Uploaded</th>
    </tr>
  </thead>
  <tbody id="teamStorageBody"></tbody>
</table>

<script>
  var selDiv = "";
  document.addEventListener("DOMContentLoaded", init, false);
  function init() {
    document.querySelector('#files').addEventListener('change', handleFileSelect, false);
    selDiv = document.querySelector("#selectedFiles");
}

  function handleFileSelect(e) {
    if(!e.target.files) return;
    selDiv.innerHTML = "";
    var files = e.target.files;
    for(var i=0; i<files.length; i++) {
    var f = files[i];
    selDiv.innerHTML += f.name + "<br/>";
}

}
</script>


</div>


  <body>
      <script src="javascript/scripts.js"></script>
  </body>
</html>
